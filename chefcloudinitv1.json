{"status":{},"spec":{"description":"","resources":{"client_attrs":{"None":{"y":160,"x":180},"WebServiceNginx":{"y":160,"x":480}},"service_definition_list":[{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"WebServiceNginx"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"0847d6fb_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"59dcd563_runbook","main_task_local_reference":{"kind":"app_task","name":"0847d6fb_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes physical machines as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"WebServiceNginx"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"537dba74_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"29d26c66_runbook","main_task_local_reference":{"kind":"app_task","name":"537dba74_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"WebServiceNginx"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"80d29366_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"b2649e3a_runbook","main_task_local_reference":{"kind":"app_task","name":"80d29366_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"WebServiceNginx"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"1d8554f8_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"910d63e5_runbook","main_task_local_reference":{"kind":"app_task","name":"1d8554f8_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"WebServiceNginx"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"e41e59ba_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"f17c14a0_runbook","main_task_local_reference":{"kind":"app_task","name":"e41e59ba_dag"},"variable_list":[]},"name":"action_restart"},{"description":"System action for deleting an application. Does not delete physical machines","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"WebServiceNginx"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"346446d5_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"098a3405_runbook","main_task_local_reference":{"kind":"app_task","name":"346446d5_dag"},"variable_list":[]},"name":"action_soft_delete"}],"depends_on_list":[],"name":"WebServiceNginx","port_list":[],"tier":"","variable_list":[],"description":""}],"substrate_definition_list":[{"description":"","action_list":[],"type":"AHV_VM","name":"webtestv1","readiness_probe":{"connection_type":"SSH","disable_readiness_probe":true,"timeout_secs":"120","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","connection_port":22,"login_credential_local_reference":{"kind":"app_credential","name":"rhel74creds"}},"editables":{"create_spec":{"name":true,"resources":{}}},"os_type":"Linux","create_spec":{"name":"webuat00","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"9710fadc-eb0d-4f9f-8159-d9f3c40d073e"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":2,"num_sockets":2,"gpu_list":[],"memory_size_mib":4096,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\nfqdn: @@{name}@@.domain.com\nmanage_etc_hosts: true\nnode_name: @@{name}@@\n\nbootcmd: \n  - \"sudo curl -L https:\/\/omnitruck.chef.io\/install.sh | sudo bash -s -- -v 13.5.3\"\n\nchef:\n\n # Valid values are 'gems' and 'packages' and 'omnibus'\n install_type: \"omnibus\"\n\n # Boolean: run 'install_type' code even if chef-client\n #          appears already installed.\n force_install: false\n\n # Chef settings\n server_url: \"https:\/\/chef.domain.com\/organizations\/automate\/\"\n\n # Node Name\n # Defaults to the instance-id if not present\n node_name: \"#{Socket.gethostname}\"\n\n # Environment\n # Defaults to '_default' if not present\n #environment: \"production\"\n\n # Default validation name is chef-validator\n validation_name: \"ChefWS\"\n # if validation_cert's value is \"system\" then it is expected\n # that the file already exists on the system.\n validation_cert: |\n     -----BEGIN RSA PRIVATE KEY-----\n      -----END RSA PRIVATE KEY-----\n\n # A run list for a first boot json, an example (not required)\n run_list:\n  - \"role[ngnx]\"\n\n # Specify a list of initial attributes used by the cookbooks\n #initial_attributes:\n #   apache:\n #     prefork:\n #       maxclients: 100\n #     keepalive: \"off\"\n\n # if install_type is 'omnibus', change the url to download\n omnibus_url: \"https:\/\/www.chef.io\/chef\/install.sh\"\n\n # if install_type is 'omnibus', pass pinned version string\n # to the install script\n omnibus_version: \"12.3.0\"\n\n\n# Capture all subprocess output into a logfile\n# Useful for troubleshooting cloud-init issues\noutput: {all: '| tee -a \/var\/log\/cloud-init-output.log'}\n\nruncmd:\n  - \"[ firewall-cmd, --zone=public, --add-service http, --permanent ]\"\n  - chef-client"},"type":"","sysprep":null},"power_state":"ON","type":"","boot_config":null,"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"rhel_cloud_image_v10","uuid":"1eba17b6-a907-4892-b995-d598f91c0f48"},"type":"","disk_size_mib":1,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}},{"data_source_reference":null,"type":"","disk_size_mib":61440,"device_properties":{"type":"","disk_address":{"type":"","device_index":1,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":""},"variable_list":[]}],"credential_definition_list":[{"username":"root","description":"","type":"PASSWORD","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"name":"rhel74creds"}],"package_definition_list":[{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"WebServiceNginx"}],"name":"installation","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"installation"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"PackageInstallTask"}],"name":"f48a0dfa_dag","state":"NOT_VALIDATED","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_package","name":"installation"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"PackageInstallTask","state":"NOT_VALIDATED","attrs":{"exit_status":[],"script":"chef-client\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"rhel74creds"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"4b5513c8_runbook","state":"NOT_VALIDATED","main_task_local_reference":{"kind":"app_task","name":"f48a0dfa_dag"},"message_list":[],"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"installation"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"PackageUninstallTask"}],"name":"5d3996a2_dag","state":"NOT_VALIDATED","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_package","name":"installation"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"PackageUninstallTask","state":"NOT_VALIDATED","attrs":{"exit_status":[],"script":"echo \"nginx\"","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"rhel74creds"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"cf6a4eed_runbook","state":"NOT_VALIDATED","main_task_local_reference":{"kind":"app_task","name":"5d3996a2_dag"},"message_list":[],"variable_list":[]}},"variable_list":[]}],"app_profile_list":[{"deployment_create_list":[{"type":"GREENFIELD","description":"","action_list":[],"name":"45e37504_deployment","max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"installation"}],"substrate_local_reference":{"kind":"app_substrate","name":"webtestv1"},"min_replicas":"1","variable_list":[]}],"description":"","action_list":[],"name":"Default","variable_list":[]}],"default_credential_local_reference":{"kind":"app_credential","name":"rhel74creds"},"type":"USER"},"name":"chefcloudinitv1"},"api_version":"3.0","metadata":{"last_update_time":"1518437847733995","kind":"blueprint","spec_version":2,"creation_time":"1518437788929517","name":"chefcloudinitv1"}}